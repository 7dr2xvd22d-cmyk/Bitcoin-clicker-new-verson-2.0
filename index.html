<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin Tycoon Pro</title>
    <style>
        :root {
            --btc-orange: #f7931a;
            --bg-dark: #0f0f0f;
            --panel-bg: #1e1e1e;
            --text-main: #ffffff;
            --accent: #4caf50;
        }

        body {
            font-family: 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* --- VENSTRE SIDE: KLIKKEREN --- */
        .clicker-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        #event-banner {
            position: absolute;
            top: 20px;
            background: var(--btc-orange);
            color: black;
            padding: 10px 30px;
            border-radius: 5px;
            font-weight: bold;
            display: none;
            z-index: 10;
            box-shadow: 0 0 20px rgba(247, 147, 26, 0.5);
        }

        .btc-main-btn {
            font-size: 180px;
            cursor: pointer;
            user-select: none;
            transition: transform 0.1s;
            filter: drop-shadow(0 0 30px rgba(247, 147, 26, 0.2));
            margin: 20px 0;
        }

        .btc-main-btn:active {
            transform: scale(0.92);
        }

        .stats-display {
            text-align: center;
        }

        .balance-text {
            font-size: 3rem;
            color: var(--btc-orange);
            margin: 0;
            font-weight: 900;
        }

        /* --- HÃ˜YRE SIDE: BUTIKK --- */
        .sidebar {
            width: 400px;
            background: var(--panel-bg);
            border-left: 2px solid #333;
            display: flex;
            flex-direction: column;
            padding: 20px;
            box-sizing: border-box;
        }

        .shop-container {
            flex-grow: 1;
            overflow-y: auto;
            margin-top: 10px;
        }

        .shop-item {
            background: #2a2a2a;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: 0.2s;
        }

        .shop-item:hover:not(.locked) {
            border-color: var(--btc-orange);
            background: #333;
        }

        .shop-item.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .shop-item.locked {
            display: none;
        }

        .item-info b { font-size: 1.1rem; color: var(--btc-orange); }
        .item-price { color: #aaa; font-size: 0.9rem; }

        /* Prestige Seksjon */
        .prestige-area {
            padding-top: 20px;
            border-top: 2px solid #333;
            margin-top: 10px;
        }

        .prestige-btn {
            width: 100%;
            padding: 15px;
            background: #6200ea;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            display: none; /* Skjult til man nÃ¥r mÃ¥let */
        }

        .achievements-box {
            background: #111;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 0.85rem;
            color: var(--accent);
            max-height: 100px;
            overflow-y: auto;
        }
    </style>
</head>
<body>

    <div class="clicker-section">
        <div id="event-banner">ðŸ”¥ BOOST: 2X KLIKK-VERDI! ðŸ”¥</div>
        
        <div class="stats-display">
            <p>Din formue:</p>
            <h1 class="balance-text"><span id="balance">0</span> â‚¿</h1>
            <p>Per klikk: <span id="click-power">1</span> â‚¿ | Per sek: <span id="passive-power">0</span> â‚¿</p>
            <p id="prestige-info" style="color: #888;"></p>
        </div>

        <div class="btc-main-btn" onclick="handleMainClick()">â‚¿</div>
        
        <div class="achievements-box" id="ach-list">
            <b>Achievements:</b>
            <div id="ach-messages">Ingen enda...</div>
        </div>
    </div>

    <div class="sidebar">
        <h2>Butikk</h2>
        <div class="shop-container" id="shop-ui">
            </div>

        <div class="prestige-area">
            <button id="prestige-button" class="prestige-btn" onclick="triggerPrestige()">
                PRESTIGE (Reset for 2x Multiplikator)
            </button>
            <small id="prestige-hint" style="color: #666; display: block; text-align: center;">
                NÃ¥ 10,000 â‚¿ for Ã¥ lÃ¥se opp Prestige
            </small>
        </div>
    </div>

    <script>
        // --- DATA ---
        let game = {
            bitcoin: 0,
            totalMined: 0,
            prestigeMultiplier: 1,
            eventMultiplier: 1,
            unlockedItems: ['computer'], // Start-item
            achievements: [],
            upgrades: {
                computer: { name: "Computer", cost: 20, bonus: 2, count: 0, type: 'click', unlockAt: 0 },
                worker: { name: "Worker", cost: 100, bonus: 5, count: 0, type: 'passive', unlockAt: 50 },
                wifi: { name: "Better WiFi", cost: 500, bonus: 15, count: 0, type: 'click', unlockAt: 300 },
                office: { name: "Office with Workers", cost: 2000, bonus: 50, count: 0, type: 'passive', unlockAt: 1000 }
            }
        };

        // --- HOVEDFUNKSJONER ---
        function handleMainClick() {
            const amount = getClickValue();
            game.bitcoin += amount;
            game.totalMined += amount;
            checkUnlocks();
            checkAchievements();
            updateUI();
        }

        function getClickValue() {
            let base = 1;
            // Legg til alle klikk-oppgraderinger
            for (let id in game.upgrades) {
                if (game.upgrades[id].type === 'click') {
                    base += (game.upgrades[id].count * game.upgrades[id].bonus);
                }
            }
            return base * game.prestigeMultiplier * game.eventMultiplier;
        }

        function getPassiveValue() {
            let base = 0;
            for (let id in game.upgrades) {
                if (game.upgrades[id].type === 'passive') {
                    base += (game.upgrades[id].count * game.upgrades[id].bonus);
                }
            }
            return base * game.prestigeMultiplier;
        }

        function buyItem(id) {
            const item = game.upgrades[id];
            const currentCost = Math.floor(item.cost * Math.pow(1.2, item.count));

            if (game.bitcoin >= currentCost) {
                game.bitcoin -= currentCost;
                item.count++;
                updateUI();
            } else {
                alert("Ikke nok Bitcoin!");
            }
        }

        // --- PRESTIGE & EVENTS ---
        function triggerPrestige() {
            if (game.totalMined >= 10000) {
                if (confirm("Vil du resette progresjonen? Du beholder prestigen og fÃ¥r 2x mer Bitcoin permanent per prestige-nivÃ¥!")) {
                    game.bitcoin = 0;
                    game.prestigeMultiplier *= 2;
                    // Reset upgrades
                    for (let id in game.upgrades) {
                        game.upgrades[id].count = 0;
                    }
                    updateUI();
                }
            }
        }

        function startRandomEvent() {
            if (Math.random() > 0.7) { // 30% sjanse hvert 30. sekund
                game.eventMultiplier = 2;
                document.getElementById('event-banner').style.display = 'block';
                setTimeout(() => {
                    game.eventMultiplier = 1;
                    document.getElementById('event-banner').style.display = 'none';
                }, 10000); // Varer i 10 sekunder
            }
        }

        // --- SYSTEMER ---
        function checkUnlocks() {
            for (let id in game.upgrades) {
                if (!game.unlockedItems.includes(id) && game.totalMined >= game.upgrades[id].unlockAt) {
                    game.unlockedItems.push(id);
                }
            }
            
            // Prestige knapp logikk
            if (game.totalMined >= 10000) {
                document.getElementById('prestige-button').style.display = 'block';
                document.getElementById('prestige-hint').style.display = 'none';
            }
        }

        function checkAchievements() {
            const achBox = document.getElementById('ach-messages');
            const milestones = [100, 1000, 5000, 10000];
            
            milestones.forEach(m => {
                if (game.totalMined >= m && !game.achievements.includes(m)) {
                    game.achievements.push(m);
                    const div = document.createElement('div');
                    div.innerText = `ðŸ† MÃ¥l nÃ¥dd: ${m} â‚¿ totalt!`;
                    if (achBox.innerText === "Ingen enda...") achBox.innerHTML = "";
                    achBox.prepend(div);
                }
            });
        }

        function updateUI() {
            document.getElementById('balance').innerText = Math.floor(game.bitcoin).toLocaleString();
            document.getElementById('click-power').innerText = getClickValue();
            document.getElementById('passive-power').innerText = getPassiveValue();
            document.getElementById('prestige-info').innerText = `Prestige Multiplikator: ${game.prestigeMultiplier}x`;

            const shopUI = document.getElementById('shop-ui');
            shopUI.innerHTML = '';

            for (let id in game.upgrades) {
                const item = game.upgrades[id];
                if (!game.unlockedItems.includes(id)) continue;

                const cost = Math.floor(item.cost * Math.pow(1.2, item.count));
                const canAfford = game.bitcoin >= cost;

                const div = document.createElement('div');
                div.className = `shop-item ${canAfford ? '' : 'disabled'}`;
                div.onclick = () => buyItem(id);
                div.innerHTML = `
                    <div class="item-info">
                        <b>${item.name}</b> (${item.count})<br>
                        <span class="item-price">Pris: ${cost} â‚¿</span><br>
                        <small>Gir +${item.bonus} per ${item.type === 'click' ? 'klikk' : 'sek'}</small>
                    </div>
                `;
                shopUI.appendChild(div);
            }
        }

        // --- LOOPS ---
        // Passiv inntekt (hvert sekund)
        setInterval(() => {
            const income = getPassiveValue();
            if (income > 0) {
                game.bitcoin += (income / 10); // KjÃ¸rer 10 ganger i sekundet for smooth oppdatering
                game.totalMined += (income / 10);
                updateUI();
            }
        }, 100);

        // Sjekk for events hvert 30. sekund
        setInterval(startRandomEvent, 30000);

        // Initial rendering
        updateUI();
    </script>
</body>
</html>
